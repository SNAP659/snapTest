function getCursorPosition(e){var t=0;if(document.selection){e.focus();var o=document.selection.createRange();o.moveStart("character",-e.value.length),t=o.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function setCursorPosition(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",t),o.moveStart("character",t),o.select()}}function parseHash(){var e={lesson:location.href.split("/").pop()};return e}function isTeamLesson(){if(1==codemao.isteamwork){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.setAttribute("href","css/backpack.css"),document.head.appendChild(e);var t=document.createElement("script");t.type="text/javascript",t.src="js/backpack.js",t.onload=function(){Backpack.init()},document.body.appendChild(t)}}function handleUploadFile(e){e||(e=IDEMorph);var t=document.createElement("input");e.filePicker&&(document.body.removeChild(e.filePicker),e.filePicker=null),t.type="file",t.multiple="multiple",t.style.color="transparent",t.style.backgroundColor="transparent",t.style.border="none",t.style.outline="none",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.width="0px",t.style.height="0px",t.addEventListener("change",function(){document.body.removeChild(t),e.filePicker=null,world.hand.processDrop(t.files)},!1),document.body.appendChild(t),e.filePicker=t,t.click()}var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?0cc466174ebd3ce1ada4af97014b7d3d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var world,appmode,devmode,user,playermode=!1,dev=location.hash.split("|")[2],app=location.hash.split("|")[1];appmode="true"==app,devmode="true"==dev;var IDEMorph,lessonInfo,user={};window.addEventListener("load",function(){function e(){world.doOneCycle(),requestAnimationFrame(e)}if(lessonInfo=window.codemao,isTeamLesson(),world=new WorldMorph(document.getElementById("world")),world.worldCanvas.focus(),IDEMorph=new IDE_Morph,IDEMorph.openIn(world),Backpack.init(),$.ajax({type:"GET",url:window.codemao.apiServer+"/backpack/info",async:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){200===e.code&&(codemao.isTeamMember=!0)}}),$.ajax({type:"GET",url:"https://api.codemao.cn/api/wechat/mlz/qrcode",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){200===e.code&&(document.querySelector(".master-qr-code-img").src=e.data.url)}}),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},requestAnimationFrame(e),-1==parseHash().lesson){var t=document.createElement("script");t.type="text/javascript",t.src="js/cm-dialog.js",document.body.appendChild(t),t=null}IDEMorph.painter||(IDEMorph.painter=painterObject)});var jiathis_config={url:"",summary:"",shortUrl:!1,hideMore:!0},tutorialEV=new EventEmitter;