function codemao_do_phone_register(){function i(){Dialog.show({title:"注册",width:400,height:440,content_css:"border-radius:0 0 5px 5px;overflow:hidden;",content:'        <div style="width:100%;height:100%;margin:5px 5px 10px 5px;background:#fff;border-radius:5px;padding:20px 20px 30px 20px;">        <div><i  class="sign_icon" style="width: 85px; height: 85px; display: block;margin:0 auto;"></i></div>        <div style="text-align: center;font-size: 22px;margin: 30px 0 40px 0;"><p>恭喜你，你的编程猫账号：</p><p style="color: #FF5337;">'+e+'</p><p>注册成功！！</p></div>        <div class="btn-regist" onclick="location.reload();" style="height:45px;line-height:45px;border-bottom:3px solid #DE2D11;background:#FF5337;color:#fff;font-size:20px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:15px;">进入编程猫的世界</div>        </div>',buttons:[]})}var o=$(".cm-dialog-box .input-phone").attr("data-s"),t=$(".cm-dialog-box .input-password").attr("data-s"),e=$(".cm-dialog-box .input-phone").val(),a=$(".cm-dialog-box .input-password").val(),s=$(".cm-dialog-box .input-yanzhengCode").val();"1"!=o||"1"!=t?($(".cm-dialog-box .input-phone").blur(),$(".cm-dialog-box .input-password").blur()):$.ajax({url:window.codemao.apiServer+"/user/register/phone",type:"POST",data:{username:e,password:a,code:s},xhrFields:{withCredentials:!0},success:function(o){2050==o.code?i():Tips.show({text:o.msg})},error:function(i){console.log(i)}})}function codemao_do_email_register(){function i(){Dialog.show({title:"注册",width:400,height:440,content_css:"border-radius:0 0 5px 5px;overflow:hidden;",content:'        <div style="width:100%;height:100%;margin:5px 5px 10px 5px;background:#fff;border-radius:5px;padding:20px 20px 30px 20px;">        <div style="margin-left: 24px;"><i  class="sign_email_icon" style="width: 113px; height: 85px; display: block;margin:0 auto;"></i></div>        <div style="text-align: center;font-size: 22px;margin-top: 20px;"><p>验证邮件已发出</p><p style="font-size: 18px;">请在48小时内登录邮箱验证</p></div>        <div style="text-align: center;color: #A9A9A9;font-size: 14px;margin: 20px 0 40px 0;"><p>登录邮箱<font color="#FF5337">'+e+"</font></p><p>并按邮件提示操作即可</p></div>        </div>",buttons:[]})}var o=$(".cm-dialog-box .input-email").attr("data-s"),t=$(".cm-dialog-box .input-password").attr("data-s"),e=$(".cm-dialog-box .input-email").val(),a=$(".cm-dialog-box .input-password").val();"1"!=o||"1"!=t?($(".cm-dialog-box .input-email").blur(),$(".cm-dialog-box .input-password").blur()):$.ajax({url:window.codemao.apiServer+"/user/register/email",type:"POST",data:{username:e,password:a},xhrFields:{withCredentials:!0},success:function(o){2004==o.code?i():Tips.show({text:o.msg})},error:function(i){console.log(i)}})}function emailrout(){console.log(emailinfo)}function codemao_phone_register(){Dialog.show({title:"手机注册",width:400,height:450,content_css:"border-radius:0 0 5px 5px;overflow:hidden;",content:'        <div style="width:100%;height:100%;margin:5px 10px 10px 5px;background:#fff;border-radius:5px;padding:20px 20px 30px 40px;">            <div class="input-wrap vh-center" style="margin-bottom:10px">                <input class="input-phone" data-s="0" maxlength=11 placeholder="常用手机号" style="border:1px solid #ddd;border-radius:1px;">                <i class="fa fa-check-circle" style="color:#7ED321;font-size:20px;margin-left:10px;visibility:hidden;"></i>            </div>            <div class="input-wrap vh-center" style="margin-bottom:10px">                <input class="input-password" data-s="0" type="password" placeholder="密码（字母，数字最少6位）" style="border:1px solid #ddd;border-radius:1px;">                <i class="fa fa-check-circle" style="color:#7ED321;font-size:20px;margin-left:10px;visibility:hidden;"></i>            </div>              <div class="input-wrap" style="margin-bottom:10px">                <input class="input-yanzhengCode" maxlength=4 placeholder="验证码" style="border:1px solid #ddd;border-radius:1px;width:39%;margin-right:4%;float: left;">                <input class="yanzhengCode" type="button" style="border: 1px solid #D9D9D9;width:48%;background-color: #F7F7F7;color: #333333; text-align: center;" value="获取短信验证码">            </div>            <div class="btn-regist" style="height:45px;line-height:45px;border-bottom:3px solid #DE2D11;background:#FF5337;color:#fff;font-size:20px;text-align:center;width:91%;border-radius:3px;cursor:pointer;margin-bottom:15px;" onClick="codemao_do_phone_register()">注册</div>            <div style="height:45px;line-height:45px;border-bottom:3px solid #E6E6E6;color:#FF5337;background:#F7F7F7;font-size:16px;text-align:center;width:91%;border-radius:3px;cursor:pointer;margin-bottom:20px;margin-top:20px;" onClick="handleLogin()">已有账号？立即登陆</div>        </div>',buttons:[]}),$(".cm-dialog-box .input-phone").blur(function(){var i=$(this).val();if($(".cm-dialog-box .phone-error").remove(),/^\d{11}$/.test(i))$(this).siblings(".fa").css("visibility","visible"),$(this).attr("data-s","1");else{$(this).siblings(".fa").css("visibility","hidden");var o='<div class="phone-error vh-center" style="color:red;margin-bottom:10px;text-align:left;width:170px;"><i class="fa fa-times" style="margin-right: 10px;"></i>手机号格式不正确</div>';$(this).parent().after(o),$(this).attr("data-s","0")}}),$(".cm-dialog-box .input-password").blur(function(){var i=$(this).val();if($(".cm-dialog-box .password-error").remove(),/^[0-9a-zA-Z]{6,}$/.test(i))$(this).siblings(".fa").css("visibility","visible"),$(this).attr("data-s","1");else{$(this).siblings(".fa").css("visibility","hidden");var o='<div class="password-error vh-center" style="color:red;margin-bottom:10px;text-align:left;width:140px;"><i class="fa fa-times" style="margin-right: 10px;"></i>密码格式不正确</div>';$(this).parent().after(o),$(this).attr("data-s","0")}}),$(".cm-dialog-box .yanzhengCode").click(function(){function i(t){0==o?(t.attr("disabled",!1),t.val("获取短信验证码"),$(".cm-dialog-box .yanzhengCode").css("background-color","#F7F7F7"),o=60):(t.css("background-color","#D9D9D9"),t.attr("disabled",!0),t.val("重新发送("+o+")"),o--,setTimeout(function(){i(t)},1e3))}var o=60;$(".cm-dialog-box .phone-error").remove();var t=$(".cm-dialog-box .input-phone").attr("data-s"),e=$(".cm-dialog-box .input-phone").val();if("0"==t){var a='<div class="phone-error vh-center" style="color:red;margin-bottom:10px;text-align:left;width:170px;"><i class="fa fa-times" style="margin-right: 10px;"></i>手机号格式不正确</div>';$(".cm-dialog-box .input-phone").parent().after(a)}else $.ajax({url:window.codemao.apiServer+"/user/register/phone/code?phonenumber="+e,type:"GET",success:function(o){200==o.code?i($(".cm-dialog-box .yanzhengCode")):Tips.show({text:o.msg}),console.log(o)}});$(".cm-dialog-box .yanzhengimg").click()}),$(".cm-dialog-box .dialog").on("keydown",function(i){13==i.keyCode&&$(".cm-dialog-box .btn-regist").click()})}function codemao_email_register(){Dialog.show({title:"邮箱注册",width:400,height:380,content_css:"border-radius:0 0 5px 5px;overflow:hidden;",content:'        <div style="width:100%;height:100%;margin:5px 10px 10px 5px;background:#fff;border-radius:5px;padding:20px 20px 10px 40px;">            <div class="input-wrap vh-center" style="margin-bottom:10px">                <input class="input-email" data-s="0" placeholder="常用邮箱地址" style="border:1px solid #ddd;border-radius:1px;">                <i class="fa fa-check-circle" style="color:#7ED321;font-size:20px;margin-left:10px;visibility:hidden;"></i>            </div>            <div class="input-wrap vh-center" style="margin-bottom:10px">                <input class="input-password" data-s="0" type="password" placeholder="密码（字母，数字最少6位）" style="border:1px solid #ddd;border-radius:1px;">                <i class="fa fa-check-circle" style="color:#7ED321;font-size:20px;margin-left:10px;visibility:hidden;"></i>            </div>            <div class="btn-regist" style="height:45px;line-height:45px;border-bottom:3px solid #DE2D11;background:#FF5337;color:#fff;font-size:20px;text-align:center;width:91%;border-radius:3px;cursor:pointer;margin-bottom:15px;" onClick="codemao_do_email_register()">注册</div>            <div style="height:45px;line-height:45px;border-bottom:3px solid #E6E6E6;color:#FF5337;background:#F7F7F7;font-size:16px;text-align:center;width:91%;border-radius:3px;cursor:pointer;margin-bottom:20px;margin-top:20px;" onClick="handleLogin()">已有账号？立即登陆</div>        </div>',buttons:[]}),$(".cm-dialog-box .input-email").blur(function(){var i=$(this).val();$(".cm-dialog-box .email-error").remove();var o=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(o.test(i))$(this).siblings(".fa").css("visibility","visible"),$(this).attr("data-s","1");else{$(this).siblings(".fa").css("visibility","hidden");var t='<div class="email-error vh-center" style="color:red;margin-bottom:10px;text-align:left;width:150px;"><i class="fa fa-times" style="margin-right: 10px;"></i>邮箱格式不正确</div>';$(this).parent().after(t),$(this).attr("data-s","0")}}),$(".cm-dialog-box .input-password").blur(function(){var i=$(this).val();if($(".cm-dialog-box .password-error").remove(),/^[0-9a-zA-Z]{6,}$/.test(i))$(this).siblings(".fa").css("visibility","visible"),$(this).attr("data-s","1");else{$(this).siblings(".fa").css("visibility","hidden");var o='<div class="password-error vh-center" style="color:red;margin-bottom:10px;text-align:left;width:140px;"><i class="fa fa-times" style="margin-right: 10px;"></i>密码格式不正确</div>';$(this).parent().after(o),$(this).attr("data-s","0")}})}function codemao_login(){$.ajax(window.codemao.apiServer+"/user/login",{dataType:"json",type:"POST",data:{username:$(".cm-dialog-box .dialog-wrap .input-username").val(),password:$(".cm-dialog-box .dialog-wrap .input-password").val()},xhrFields:{withCredentials:!0},success:function(i){200===i.code?location.href=location.origin+"/lesson":Tips.show({text:i.msg})}})}function codemao_wechat_login(){location.href="https://open.weixin.qq.com/connect/qrconnect?appid=wxeda82dc272f7fe92&scope=snsapi_login&redirect_uri=https://www.codemao.cn%2Flesson&state=&login_type=jssdk&style=white"}function handleLogin(){Dialog.show({title:"登录",width:400,height:400,content_css:"border-radius:0 0 5px 5px;overflow:hidden;",content:'        <div style="width:100%;height:100%;margin:5px 10px 10px 5px;background:#fff;border-radius:5px;padding:20px 40px 30px 40px;">            <div class="input-wrap" style="margin-bottom:10px">                <input class="input-username" placeholder="请输入用户名" style="border:1px solid #ddd;border-radius:1px;">            </div>            <div class="input-wrap" style="margin-bottom:10px">                <input class="input-password" type="password" placeholder="请输入密码" style="border:1px solid #ddd;border-radius:1px;">            </div>            <div class="btn-dialog-login" style="height:45px;line-height:45px;border-bottom:3px solid #DE2D11;background:#FF5337;color:#fff;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:15px;" onClick="codemao_login()">登录</div>            <div style="border-top:1px solid #ccc"></div>            <div style="height:45px;line-height:45px;border-bottom:3px solid #E6E6E6;color:#FF5337;background:#F7F7F7;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:20px;margin-top:20px;" onClick="handleSignUp()">还没有账号？免费注册</div>            <div style="color:#9C9B9B">第三方账号登陆:                <a href="https://graph.qq.com/oauth2.0/authorize?response_type=code&amp;client_id=101253342&amp;redirect_uri=http://codemao.cn/login/user-center/index.php&amp;scope=467083ef77014627e4f8d8411b1850cf"><img src="/index/img/qq.png"></a>                <img src="http://assets.codemao.cn/assets/login/images/wechat.png" onClick="codemao_wechat_login()" style="cursor:pointer">            </div>        </div>',buttons:[]}),$(".cm-dialog-box .dialog").on("keydown",function(i){13==i.keyCode&&$(".cm-dialog-box .dialog .btn-dialog-login").click()})}function handleSignUp(){Dialog.show({title:"注册",content_css:"border-radius:0 0 5px 5px;overflow:hidden;",content:'        <div style="width:100%;height:100%;margin:5px 10px 10px 5px;background:#fff;border-radius:5px;padding:20px 40px 30px 40px;">            <a href="https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=101253342&redirect_uri=http://codemao.cn/login/user-center/index.php&scope=467083ef77014627e4f8d8411b1850cf" style="display: block;height:45px;line-height:45px;border-bottom:3px solid #DE2D11;background:#FF5337;color:#fff;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:15px;" onClick="codemao_register()"><i class="fa fa-qq" style="font-size: 22px; vertical-align: text-bottom; margin-right: 16px;"></i> QQ注册</a>            <div  onclick="codemao_wechat_login()" style="height:45px;line-height:45px;border-bottom:3px solid #DE2D11;background:#FF5337;color:#fff;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:15px;" onClick="codemao_register()"><i class="fa fa-weixin" style="font-size: 22px; vertical-align: text-bottom; margin-right: 16px;"></i> 微信注册</div>            <div  onclick="codemao_phone_register()" class="vh-center" style="height:45px;line-height:45px;border-bottom:3px solid #E6E6E6;background:#F7F7F7;color:#FF5337;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:15px;"><i class="fa fa-mobile" style="font-size: 40px; vertical-align: text-bottom; margin-right: 25px;margin-left: 3px;"></i> 手机注册</div>            <div  onclick="codemao_email_register()" style="height:45px;line-height:45px;border-bottom:3px solid #E6E6E6;background:#F7F7F7;color:#FF5337;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:15px;"><i class="fa fa-envelope-o" style="font-size: 22px; vertical-align: text-bottom; margin-right: 16px;"></i> 邮箱注册</div>            <div style="border-top:1px solid #ccc"></div>            <div style="height:45px;line-height:45px;border-bottom:3px solid #E6E6E6;color:#FF5337;background:#F7F7F7;font-size:16px;text-align:center;width:100%;border-radius:3px;cursor:pointer;margin-bottom:20px;margin-top:20px;" onClick="handleLogin()">已有账号？立即登陆</div>        </div>',width:400,height:440,buttons:[]}),$(".cm-dialog-box .dialog").on("keydown",function(i){13==i.keyCode&&$(".cm-dialog-box .dialog .btn-dialog-register").click()})}function getUserMessage(){function i(i){var o=i>100?99:i;$(".cm-navbar-message-num").text(o),$(".cm-navbar-message-num").css({display:"block"})}$(".cm-navbar-user-avatar").size()&&$.ajax({url:window.codemao.apiServer+"/message/all/total",type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(o){200==o.code&&(0!=o.data.messageSum?i(o.data.messageSum):$(".cm-navbar-message-num").css({display:"none"}))}})}var dialogBox=document.createElement("div");dialogBox.className="cm-dialog-box",dialogBox.innerHTML='<div class="dialog-wrap vh-center" mode="tabs" style="opacity:0.01"><div class="dialog v-flex"><div class="dialog-decorations-wrap"><div class="dialog-decoration1"></div><div class="dialog-decoration2"></div><div class="dialog-decoration-circle"></div></div><div class="dialog-codemao"></div><div class="btn-dialog-close"></div><div class="dialog-title"></div><div class="dialog-tabs"></div><div class="dialog-content v-flex flex1"></div><div class="dialog-buttons h-flex"><button class="dialog-button">取消</button><button class="dialog-button">确定</button></div></div></div>',document.body.appendChild(dialogBox);var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.setAttribute("href","css/cm-dialog.css"),document.head.appendChild(link);var Dialog={};Dialog.dom=$(".cm-dialog-box .dialog-wrap"),Dialog.boxDom=$(".cm-dialog-box"),Dialog.dialogDom=$(".cm-dialog-box .dialog"),Dialog.titleDom=$(".cm-dialog-box .dialog-title"),Dialog.contentDom=$(".cm-dialog-box .dialog-content"),Dialog.tabs=$(".cm-dialog-box .dialog-tabs"),Dialog.incontentTabs=$(".cm-dialog-box .incontent-tabs"),Dialog.hide=function(){Dialog.boxDom.css("visibility","hidden"),Dialog.dom.css("opacity","0.01"),Dialog.dialogDom.css("transform","scale(2)"),Dialog.dialogDom.css("-webkit-transform","scale(2)")},$(".cm-dialog-box .btn-dialog-close").on("click",Dialog.hide),Dialog.show=function(i){i=i?i:{};var o={title:"提示",css:"",content_css:"",title_css:"",height:200,width:300,showDecorations:!0,content:"",mode:"none",buttons:[{text:"取消",callback:Dialog.hide},{text:"确定",callback:Dialog.hide}]};for(var t in o)void 0==i[t]&&(i[t]=o[t]);if(i.showDecorations?($(".cm-dialog-box .dialog-decorations-wrap").show(),$(".cm-dialog-box .dialog-codemao").show(),$(".cm-dialog-box .btn-dialog-close").show()):($(".cm-dialog-box .dialog-decorations-wrap").hide(),$(".cm-dialog-box .dialog-codemao").hide(),$(".cm-dialog-box .btn-dialog-close").hide()),Dialog.dialogDom.attr("style",i.css),Dialog.titleDom.attr("style",i.title_css),Dialog.contentDom.attr("style",i.content_css),Dialog.dialogDom.height(i.height),Dialog.dialogDom.width(i.width),Dialog.titleDom.text(i.title),Dialog.dom.attr("mode",i.mode),Dialog.contentDom.html(i.content),Dialog.tabs.html(""),"tabs"==i.mode){for(var e="",t=0;t<i.tabs.length;++t)Dialog.tabs.append('<div class="dialog-tab">'+i.tabs[t].title+"</div>"),e+='<div class="dialog-tab-content dialog-tab-index'+t+'">'+i.tabs[t].content+"</div>";Dialog.contentDom.html(e),$(".cm-dialog-box .dialog-tab").on("click",function(){$(".cm-dialog-box .dialog-tab").removeClass("active"),$(this).addClass("active"),$(".cm-dialog-box .dialog-tab-content").hide(),$(".cm-dialog-box .dialog-tab-index"+$(this).index()).show()}),$(".cm-dialog-box .dialog-tab").first().click()}$(".cm-dialog-box .dialog-buttons").html("");for(var t=0;t<i.buttons.length;++t){var a=i.buttons[t].css||"";$(".cm-dialog-box .dialog-buttons").append('<div class="dialog-button" style="'+a+'">'+i.buttons[t].text+"</div>"),$(".cm-dialog-box .dialog-button:nth-child("+(t+1)+")").unbind(),$(".cm-dialog-box .dialog-button:nth-child("+(t+1)+")").on("mousedown",i.buttons[t].callback),$(".cm-dialog-box .dialog-button:nth-child("+(t+1)+")").on("touchstart",i.buttons[t].callback)}$(".cm-dialog-box .incontent-tab").on("click",function(){$(".cm-dialog-box .incontent-tab").removeClass("active"),$(".cm-dialog-box .incontent-tab-content").hide(),$(this).addClass("active"),$(".cm-dialog-box .incontent-tab-index"+$(this).index()).show()}),setTimeout(function(){Dialog.dialogDom.css("transform","scale(1)"),Dialog.dialogDom.css("-webkit-transform","scale(1)"),Dialog.boxDom.css("visibility","visible"),Dialog.dom.css("opacity","1")},10)},setTimeout(getUserMessage,500),$(".cm-navbar-user-name-wrap").on("click",function(){var i=$(".cm-navbar-dropdown-menu");i.hasClass("show")?i.removeClass("show"):i.addClass("show")});var tipsStyle=document.createElement("style");tipsStyle.type="text/css",tipsStyle.appendChild(document.createTextNode("#tips-wrap{position:fixed;top:20;left:0;visibility:hidden;width:100%;opacity:.01;-webkit-transition:all .1s ease-out;text-align:center;z-index:200}#tips-wrap.show{visibility:visible;opacity:1}#tips-wrap .tip{height:30px;display:inline-block;line-height:30px;box-shadow:0 0 3px #666;border-radius:3px;color:#fff;background:#d84949;padding:0 40px 0 40px}")),document.head.appendChild(tipsStyle);var tipsWrap=document.createElement("div");tipsWrap.id="tips-wrap",tipsWrap.innerHTML='<div class="tip"></div>',document.body.appendChild(tipsWrap);var Tips={};Tips.dom=$("#tips-wrap"),Tips.hide=function(){Tips.dom.removeClass("show")},Tips.show=function(i){var o={text:"ERROR",duration:2,color:"#D84949"};for(var t in o)i[t]||(i[t]=o[t]);Tips.dom.html('<div class="tip" style="background:'+i.color+'">'+i.text+"</div>"),Tips.dom.hasClass("show")||(Tips.dom.addClass("show"),setTimeout(Tips.hide,1e3*i.duration))};