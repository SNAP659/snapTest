!function(t){var e="build/js/codemao/recorderWorker.js",n=function(t,n){var o=n||{},a=o.bufferLen||4096,c=o.numChannels||1;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,a,c,c);var r=new Worker(o.workerPath||e);r.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:c}});var s,i=!1;this.node.onaudioprocess=function(t){if(i){for(var e=[],n=0;c>n;n++)e.push(t.inputBuffer.getChannelData(n));r.postMessage({command:"record",buffer:e})}},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])},this.record=function(){i=!0},this.stop=function(){i=!1},this.clear=function(){r.postMessage({command:"clear"})},this.getBuffer=function(t){s=t||o.callback,r.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(s=t||o.callback,e=e||o.type||"audio/wav",!s)throw new Error("Callback not set");r.postMessage({command:"exportWAV",type:e})},r.onmessage=function(t){var e=t.data;s(e)},t.connect(this.node),this.node.connect(this.context.destination)};n.forceDownload=function(e,n){var o=(t.URL||t.webkitURL).createObjectURL(e),a=t.document.createElement("a");a.href=o,a.download=n||"output.wav";var c=document.createEvent("Event");c.initEvent("click",!0,!0),a.dispatchEvent(c)},t.Recorder=n}(window);