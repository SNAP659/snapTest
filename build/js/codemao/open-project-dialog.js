!function(){function e(){return c=new Vue({el:"#open-project-dialog-container",data:{isShow:!1,projectList:[]},methods:{hide:function(){r.hide()},show:function(){r.show()},refresh:function(){n()},open:function(e){i(e),this.hide()},"delete":function(e){confirmDialog.build("确认删除","确认要删除《"+e.workName+"》吗？",function(n){n&&t(e.id)},{isHideCancel:!0})}}})}function n(){a=world.children[0],o()}function o(){$.ajax({type:"GET",url:window.codemao.apiServer+"/work/list?type=old",async:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){e?c.projectList=e.data.workList:console.log("读取项目列表失败")}})}function i(e){$.ajax({url:window.codemao.apiServer+"/work/"+e,type:"GET",async:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(n){n&&n.data&&(a.id=e,a.isProjectNew=!1,a.parentId=n.data.parentid,a.openProjectString(n.data.config))}})}function t(e){$.ajax({url:codemao.apiServer+"/work/"+e,type:"DELETE",async:!0,dataType:"text",xhrFields:{withCredentials:!0},success:function(){c.refresh()}})}var c,a,r={};window.OpenProjectDialog=r,r.object=document.getElementById("open-project-dialog"),r.build=function(){r.vm||(r.vm=e())},r.refresh=n,r.show=function(){n(),c.isShow=!0},r.hide=function(){c.isShow=!1}}();